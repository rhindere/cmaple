
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>pyexpander package &#8212; pyexpander 1.8.4 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.8.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyexpander 1.8.4 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="pyexpander-package">
<h1>pyexpander package<a class="headerlink" href="#pyexpander-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-pyexpander.lib">
<span id="pyexpander-lib-module"></span><h2>pyexpander.lib module<a class="headerlink" href="#module-pyexpander.lib" title="Permalink to this headline">¶</a></h2>
<p>The main pyexpander library.</p>
<dl class="class">
<dt id="pyexpander.lib.BeginBlock">
<em class="property">class </em><code class="descclassname">pyexpander.lib.</code><code class="descname">BeginBlock</code><span class="sig-paren">(</span><em>previous=None</em>, <em>filename=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#BeginBlock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.BeginBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.lib.Block" title="pyexpander.lib.Block"><code class="xref py py-class docutils literal"><span class="pre">pyexpander.lib.Block</span></code></a></p>
<p>implements a $begin .. $end block.</p>
<p>This block is simply a variable scope, so it is derived from Block where
the constructor is called with new_scope=True.</p>
</dd></dl>

<dl class="class">
<dt id="pyexpander.lib.Block">
<em class="property">class </em><code class="descclassname">pyexpander.lib.</code><code class="descname">Block</code><span class="sig-paren">(</span><em>previous=None</em>, <em>new_scope=False</em>, <em>filename=None</em>, <em>parse_list=None</em>, <em>external_definitions=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>class that represents a block in the expander language.</p>
<p>Each block has a parent-pointer, which may be None. Blocks are used to
represent syntactical blocks in the expander language. They manage the
global variable dictionary and some more properties that are needed during
execution of the program.</p>
<dl class="method">
<dt id="pyexpander.lib.Block.add_macro">
<code class="descname">add_macro</code><span class="sig-paren">(</span><em>name</em>, <em>macro_block</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.add_macro"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.add_macro" title="Permalink to this definition">¶</a></dt>
<dd><p>add a new macro block.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.eval_">
<code class="descname">eval_</code><span class="sig-paren">(</span><em>st</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.eval_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.eval_" title="Permalink to this definition">¶</a></dt>
<dd><p>perform eval with the global variable dictionary of the block.</p>
<p>Here is an example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">parse_list</span><span class="o">=</span><span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="s2">&quot;a=2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">eval_</span><span class="p">(</span><span class="s2">&quot;3*a&quot;</span><span class="p">)</span>
<span class="go">6</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.exec_">
<code class="descname">exec_</code><span class="sig-paren">(</span><em>st</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.exec_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.exec_" title="Permalink to this definition">¶</a></dt>
<dd><p>perform exec with the global variable dictionary of the block.</p>
<p>Here is an example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">parse_list</span><span class="o">=</span><span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="s2">&quot;a=1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="s2">&quot;a=2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">previous</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>
<span class="go">1</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.export_symbols">
<code class="descname">export_symbols</code><span class="sig-paren">(</span><em>lst</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.export_symbols"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.export_symbols" title="Permalink to this definition">¶</a></dt>
<dd><p>appends items to the export_symbols list.</p>
<p>This list is used by the pop() method in order to copy values from the
current global variable dictionary to the global variable dictionary of
the previous block.</p>
<p>Here is an example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">parse_list</span><span class="o">=</span><span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">export_symbols</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">exported_syms</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">export_symbols</span><span class="p">([</span><span class="s2">&quot;d&quot;</span><span class="p">,</span><span class="s2">&quot;e&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">exported_syms</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;, &#39;d&#39;, &#39;e&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.extend">
<code class="descname">extend</code><span class="sig-paren">(</span><em>lst</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.extend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>adds items to the list of expander functions or variables.</p>
<p>Here is an example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">=</span><span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">t</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">return</span> <span class="n">x</span><span class="o">+</span><span class="mi">1</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">block</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">parse_list</span><span class="o">=</span><span class="p">[],</span><span class="n">external_definitions</span><span class="o">=</span><span class="nb">globals</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">block</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="s2">&quot;t&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_pr_set</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">direct_vars</span><span class="p">)</span>
<span class="go">set([&#39;a&#39;, &#39;b&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_pr_set</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">direct_funcs</span><span class="p">)</span>
<span class="go">set([&#39;t&#39;])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.format_text">
<code class="descname">format_text</code><span class="sig-paren">(</span><em>text</em>, <em>indent_start</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.format_text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.format_text" title="Permalink to this definition">¶</a></dt>
<dd><p>currently does indent one or more lines.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.get_block_list">
<code class="descname">get_block_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.get_block_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.get_block_list" title="Permalink to this definition">¶</a></dt>
<dd><p>returns all blocks of the list.</p>
<p>The list is returned with the oldest block first.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.get_indent">
<code class="descname">get_indent</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.get_indent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.get_indent" title="Permalink to this definition">¶</a></dt>
<dd><p>gets the indent.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.parse_elm">
<code class="descname">parse_elm</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.parse_elm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.parse_elm" title="Permalink to this definition">¶</a></dt>
<dd><p>get the current parse element.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.parse_loop">
<code class="descname">parse_loop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.parse_loop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.parse_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>loop across the items in the Block.</p>
<p>returns False if there is nothing more to parse in the current block.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.pop">
<code class="descname">pop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.pop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>removes the current block and returns the previous one.</p>
<p>Here is an example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">parse_list</span><span class="o">=</span><span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span><span class="o">=</span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span><span class="o">=</span><span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span><span class="o">=</span><span class="mi">20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">export_symbols</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span>
<span class="go">2</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.posmsg">
<code class="descname">posmsg</code><span class="sig-paren">(</span><em>msg=None</em>, <em>pos=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.posmsg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.posmsg" title="Permalink to this definition">¶</a></dt>
<dd><p>return a message together with a position.</p>
<p>This method is mainly used for error messages. We usually want to print
filename and the line and column number together with a message. This
method returns the given message string &lt;msg&gt; together with this
additional information.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.print_block_list">
<code class="descname">print_block_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.print_block_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.print_block_list" title="Permalink to this definition">¶</a></dt>
<dd><p>print all blocks in the list.</p>
<p>The list is returned with the oldest block first.</p>
<p>Here is an example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">parse_list</span><span class="o">=</span><span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">Block{</span>
<span class="go">    has parent          : False</span>
<span class="go">    filename            = None</span>
<span class="go">    template            = None</span>
<span class="go">    template_path       = None</span>
<span class="go">    has template_parselist_cache: False</span>
<span class="go">    exported_syms       = []</span>
<span class="go">    direct_vars         = set([])</span>
<span class="go">    direct_funcs        = set([])</span>
<span class="go">    macros              : []</span>
<span class="go">    new_scope           = False</span>
<span class="go">    skip                = False</span>
<span class="go">    indent              = 0</span>
<span class="go">    new_parse_list      = True</span>
<span class="go">    lst_pos             = -1</span>
<span class="go">    start_pos           = 0</span>
<span class="go">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">Block{</span>
<span class="go">    has parent          : True</span>
<span class="go">    filename            = None</span>
<span class="go">    template            = None</span>
<span class="go">    template_path       = None</span>
<span class="go">    has template_parselist_cache: False</span>
<span class="go">    exported_syms       = []</span>
<span class="go">    direct_vars         = set([])</span>
<span class="go">    direct_funcs        = set([])</span>
<span class="go">    macros              : []</span>
<span class="go">    new_scope           = True</span>
<span class="go">    skip                = False</span>
<span class="go">    indent              = 0</span>
<span class="go">    new_parse_list      = False</span>
<span class="go">    lst_pos             = -1</span>
<span class="go">    start_pos           = 0</span>
<span class="go">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">print_block_list</span><span class="p">()</span>
<span class="go">Block{</span>
<span class="go">    has parent          : False</span>
<span class="go">    filename            = None</span>
<span class="go">    template            = None</span>
<span class="go">    template_path       = None</span>
<span class="go">    has template_parselist_cache: False</span>
<span class="go">    exported_syms       = []</span>
<span class="go">    direct_vars         = set([])</span>
<span class="go">    direct_funcs        = set([])</span>
<span class="go">    macros              : []</span>
<span class="go">    new_scope           = False</span>
<span class="go">    skip                = False</span>
<span class="go">    indent              = 0</span>
<span class="go">    new_parse_list      = True</span>
<span class="go">    lst_pos             = -1</span>
<span class="go">    start_pos           = 0</span>
<span class="go">}</span>
<span class="go">Block{</span>
<span class="go">    has parent          : True</span>
<span class="go">    filename            = None</span>
<span class="go">    template            = None</span>
<span class="go">    template_path       = None</span>
<span class="go">    has template_parselist_cache: False</span>
<span class="go">    exported_syms       = []</span>
<span class="go">    direct_vars         = set([])</span>
<span class="go">    direct_funcs        = set([])</span>
<span class="go">    macros              : []</span>
<span class="go">    new_scope           = True</span>
<span class="go">    skip                = False</span>
<span class="go">    indent              = 0</span>
<span class="go">    new_parse_list      = False</span>
<span class="go">    lst_pos             = -1</span>
<span class="go">    start_pos           = 0</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.set_indent">
<code class="descname">set_indent</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.set_indent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.set_indent" title="Permalink to this definition">¶</a></dt>
<dd><p>sets the indent.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.set_substfile">
<code class="descname">set_substfile</code><span class="sig-paren">(</span><em>filename</em>, <em>tp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.set_substfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.set_substfile" title="Permalink to this definition">¶</a></dt>
<dd><p>set substitution filename.</p>
<p>Used for the “$subst”, “$template” and “$pattern” commands.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.setdefault">
<code class="descname">setdefault</code><span class="sig-paren">(</span><em>name</em>, <em>val</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.setdefault"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.setdefault" title="Permalink to this definition">¶</a></dt>
<dd><p>return a value from globals, set to a default if it’s not defined.</p>
<p>Here are some examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">parse_list</span><span class="o">=</span><span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">NameError</span>: <span class="n">name &#39;a&#39; is not defined at unknown position</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span><span class="o">=</span><span class="mi">11</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="go">11</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.str_block_list">
<code class="descname">str_block_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.str_block_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.str_block_list" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a string representation of all blocks in the list.</p>
<p>The list is returned with the oldest block first.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.str_eval">
<code class="descname">str_eval</code><span class="sig-paren">(</span><em>st</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.str_eval"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.str_eval" title="Permalink to this definition">¶</a></dt>
<dd><p>perform eval with the global variable dictionary of the block.</p>
<p>Here is an example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">parse_list</span><span class="o">=</span><span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="s2">&quot;a=2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">str_eval</span><span class="p">(</span><span class="s2">&quot;3*a&quot;</span><span class="p">)</span>
<span class="go">&#39;6&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.substfile_parselist">
<code class="descname">substfile_parselist</code><span class="sig-paren">(</span><em>include_paths</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.substfile_parselist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.substfile_parselist" title="Permalink to this definition">¶</a></dt>
<dd><p>return the parselist for a given file.</p>
<p>This method manages a cache of that assigns filenames to parselists.
This can speed things up if a file is included several times.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyexpander.lib.ForBlock">
<em class="property">class </em><code class="descclassname">pyexpander.lib.</code><code class="descname">ForBlock</code><span class="sig-paren">(</span><em>previous=None</em>, <em>new_scope=False</em>, <em>value_list=None</em>, <em>var_expr=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#ForBlock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.ForBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.lib.Block" title="pyexpander.lib.Block"><code class="xref py py-class docutils literal"><span class="pre">pyexpander.lib.Block</span></code></a></p>
<p>implements a $for .. $endfor block.</p>
<dl class="method">
<dt id="pyexpander.lib.ForBlock.next_loop">
<code class="descname">next_loop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#ForBlock.next_loop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.ForBlock.next_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>performs next loop.</p>
<dl class="docutils">
<dt>returns:</dt>
<dd>True when the loop is not yet finished.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.ForBlock.set_loop_var">
<code class="descname">set_loop_var</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#ForBlock.set_loop_var"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.ForBlock.set_loop_var" title="Permalink to this definition">¶</a></dt>
<dd><p>set the loop variable to a new value.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyexpander.lib.IfBlock">
<em class="property">class </em><code class="descclassname">pyexpander.lib.</code><code class="descname">IfBlock</code><span class="sig-paren">(</span><em>previous=None</em>, <em>condition=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#IfBlock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.IfBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.lib.Block" title="pyexpander.lib.Block"><code class="xref py py-class docutils literal"><span class="pre">pyexpander.lib.Block</span></code></a></p>
<p>implements a $if .. $else .. $endif block.</p>
<p>An $if block never has a variable scope, so the base Block object is
called with new_scope=False.</p>
<dl class="method">
<dt id="pyexpander.lib.IfBlock.enter_elif">
<code class="descname">enter_elif</code><span class="sig-paren">(</span><em>condition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#IfBlock.enter_elif"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.IfBlock.enter_elif" title="Permalink to this definition">¶</a></dt>
<dd><p>enter the “elif” part in the if..endif block.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.IfBlock.enter_else">
<code class="descname">enter_else</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#IfBlock.enter_else"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.IfBlock.enter_else" title="Permalink to this definition">¶</a></dt>
<dd><p>this should be called when $else is encountered.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyexpander.lib.IncludeBlock">
<em class="property">class </em><code class="descclassname">pyexpander.lib.</code><code class="descname">IncludeBlock</code><span class="sig-paren">(</span><em>previous=None</em>, <em>new_scope=False</em>, <em>filename=None</em>, <em>include_paths=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#IncludeBlock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.IncludeBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.lib.Block" title="pyexpander.lib.Block"><code class="xref py py-class docutils literal"><span class="pre">pyexpander.lib.Block</span></code></a></p>
<p>implements a $include(filename) block.</p>
<p>This block is simply a variable scope, so it is derived from Block where
the constructor is called with new_scope=True.</p>
</dd></dl>

<dl class="class">
<dt id="pyexpander.lib.MacBlock">
<em class="property">class </em><code class="descclassname">pyexpander.lib.</code><code class="descname">MacBlock</code><span class="sig-paren">(</span><em>previous=None</em>, <em>declaration_block=None</em>, <em>parameter_list=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#MacBlock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.MacBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.lib.Block" title="pyexpander.lib.Block"><code class="xref py py-class docutils literal"><span class="pre">pyexpander.lib.Block</span></code></a></p>
<p>implements a $macro…$endmacro block.</p>
<dl class="method">
<dt id="pyexpander.lib.MacBlock.pop">
<code class="descname">pop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#MacBlock.pop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.MacBlock.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>override pop() from base class.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyexpander.lib.PatternBlock">
<em class="property">class </em><code class="descclassname">pyexpander.lib.</code><code class="descname">PatternBlock</code><span class="sig-paren">(</span><em>previous=None</em>, <em>filename=None</em>, <em>include_paths=None</em>, <em>heading=None</em>, <em>lines=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#PatternBlock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.PatternBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.lib.Block" title="pyexpander.lib.Block"><code class="xref py py-class docutils literal"><span class="pre">pyexpander.lib.Block</span></code></a></p>
<p>implements a $pattern(parameters) block.</p>
<p>This block is simply a variable scope, so it is derived from Block where
the constructor is called with new_scope=True.</p>
<dl class="method">
<dt id="pyexpander.lib.PatternBlock.def_vars">
<code class="descname">def_vars</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#PatternBlock.def_vars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.PatternBlock.def_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>define all the given variables in the PatternBlock.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.PatternBlock.pop">
<code class="descname">pop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#PatternBlock.pop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.PatternBlock.pop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyexpander.lib.ResultText">
<em class="property">class </em><code class="descclassname">pyexpander.lib.</code><code class="descname">ResultText</code><a class="reference internal" href="_modules/pyexpander/lib.html#ResultText"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.ResultText" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>basically a list of strings with a current column property.</p>
<dl class="method">
<dt id="pyexpander.lib.ResultText.append">
<code class="descname">append</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#ResultText.append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.ResultText.append" title="Permalink to this definition">¶</a></dt>
<dd><p>append some text.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.ResultText.column">
<code class="descname">column</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#ResultText.column"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.ResultText.column" title="Permalink to this definition">¶</a></dt>
<dd><p>return current column.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="pyexpander.lib.ResultText.current_column">
<em class="property">static </em><code class="descname">current_column</code><span class="sig-paren">(</span><em>st</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#ResultText.current_column"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.ResultText.current_column" title="Permalink to this definition">¶</a></dt>
<dd><p>find current column if the string is printed.</p>
<p>Note: With a string ending with ‘n’ this returns 1.</p>
<p>Here are some examples: &gt;&gt;&gt; current_column(“”)
-1
&gt;&gt;&gt; ResultText.current_column(“ab”)
-1
&gt;&gt;&gt; ResultText.current_column(“nab”)
3
&gt;&gt;&gt; ResultText.current_column(“nabn”)
1
&gt;&gt;&gt; ResultText.current_column(“nabna”)
2</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.ResultText.list_">
<code class="descname">list_</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#ResultText.list_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.ResultText.list_" title="Permalink to this definition">¶</a></dt>
<dd><p>return internal list.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyexpander.lib.SubstBlock">
<em class="property">class </em><code class="descclassname">pyexpander.lib.</code><code class="descname">SubstBlock</code><span class="sig-paren">(</span><em>previous=None</em>, <em>filename=None</em>, <em>include_paths=None</em>, <em>external_definitions=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#SubstBlock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.SubstBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.lib.Block" title="pyexpander.lib.Block"><code class="xref py py-class docutils literal"><span class="pre">pyexpander.lib.Block</span></code></a></p>
<p>implements a $subst(parameters) block.</p>
<p>This block is simply a variable scope, so it is derived from Block where
the constructor is called with new_scope=True.</p>
</dd></dl>

<dl class="class">
<dt id="pyexpander.lib.WhileBlock">
<em class="property">class </em><code class="descclassname">pyexpander.lib.</code><code class="descname">WhileBlock</code><span class="sig-paren">(</span><em>previous=None</em>, <em>new_scope=False</em>, <em>while_expr=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#WhileBlock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.WhileBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.lib.Block" title="pyexpander.lib.Block"><code class="xref py py-class docutils literal"><span class="pre">pyexpander.lib.Block</span></code></a></p>
<p>implements a $while .. $endwhile block.</p>
<dl class="method">
<dt id="pyexpander.lib.WhileBlock.next_loop">
<code class="descname">next_loop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#WhileBlock.next_loop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.WhileBlock.next_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>performs next loop.</p>
<dl class="docutils">
<dt>returns:</dt>
<dd>True when the loop is not yet finished.</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pyexpander.lib.expand">
<code class="descclassname">pyexpander.lib.</code><code class="descname">expand</code><span class="sig-paren">(</span><em>st</em>, <em>filename=None</em>, <em>external_definitions=None</em>, <em>allow_nobracket_vars=False</em>, <em>auto_continuation=False</em>, <em>auto_indent=False</em>, <em>include_paths=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#expand"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.expand" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a string, expand the text in it and print it.</p>
<dl class="docutils">
<dt>args:</dt>
<dd><p class="first">st (str): The string that is to be expaned.</p>
<dl class="last docutils">
<dt>filename (str): The filename, if given, is included in possible error</dt>
<dd>messages.</dd>
<dt>external_definitions (dict): A dict with items to import to the</dt>
<dd>globals() dictionary.</dd>
<dt>allow_nobracket_vars (bool): If True, allow variables in the form $VAR</dt>
<dd>instead of $(VAR).</dd>
<dt>auto_continuation (bool): If True, remove newline at the end of lines</dt>
<dd>with a command. This works like having an ‘’ at the end of each
line with a command.</dd>
<dt>auto_indent (bool): If True, indent the contents of macros to the same</dt>
<dd>level as the macro invocation.</dd>
<dt>include_paths (list): A list of paths that are searched for the</dt>
<dd>$include command.</dd>
</dl>
</dd>
<dt>returns:</dt>
<dd>The internal globals() dictionary.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyexpander.lib.expandFile">
<code class="descclassname">pyexpander.lib.</code><code class="descname">expandFile</code><span class="sig-paren">(</span><em>filename</em>, <em>external_definitions=None</em>, <em>allow_nobracket_vars=False</em>, <em>auto_continuation=False</em>, <em>auto_indent=False</em>, <em>include_paths=None</em>, <em>no_stdin_warning=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#expandFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.expandFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a filename, expand the text in it and print it.</p>
<dl class="docutils">
<dt>args:</dt>
<dd><p class="first">filename (str): The name of the file</p>
<dl class="last docutils">
<dt>external_definitions (dict): A dict with items to import to the</dt>
<dd>globals() dictionary.</dd>
<dt>allow_nobracket_vars (bool): If True, allow variables in the form $VAR</dt>
<dd>instead of $(VAR).</dd>
<dt>auto_continuation (bool): If True, remove newline at the end of</dt>
<dd>lines with a command. This works like having an ‘’ at the end of
each line with a command.</dd>
<dt>auto_indent (bool): If True, indent the contents of macros to</dt>
<dd>the same level as the macro invocation.</dd>
<dt>include_paths (list): A list of paths that are searched for the</dt>
<dd>$include command.</dd>
<dt>no_stdin_warning (bool): If True, print short message on stderr</dt>
<dd>when the program is waiting on input from stdin.</dd>
</dl>
</dd>
<dt>returns:</dt>
<dd>The internal globals() dictionary.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyexpander.lib.expandToStr">
<code class="descclassname">pyexpander.lib.</code><code class="descname">expandToStr</code><span class="sig-paren">(</span><em>st</em>, <em>filename=None</em>, <em>external_definitions=None</em>, <em>allow_nobracket_vars=False</em>, <em>auto_continuation=False</em>, <em>auto_indent=False</em>, <em>include_paths=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#expandToStr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.expandToStr" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a string, expand the text in it and return it as a string.</p>
<dl class="docutils">
<dt>args:</dt>
<dd><p class="first">st (str): The string that is to be expaned.</p>
<dl class="last docutils">
<dt>filename (str): The filename, if given, is included in possible error</dt>
<dd>messages.</dd>
<dt>external_definitions (dict): A dict with items to import to the</dt>
<dd>globals() dictionary.</dd>
<dt>allow_nobracket_vars (bool): If True, allow variables in the form $VAR</dt>
<dd>instead of $(VAR).</dd>
<dt>auto_continuation (bool): If True, remove newline at the end of lines</dt>
<dd>with a command. This works like having an ‘’ at the end of each
line with a command.</dd>
<dt>auto_indent (bool): If True, indent the contents of macros to the same</dt>
<dd>level as the macro invocation.</dd>
<dt>include_paths (list): A list of paths that are searched for the</dt>
<dd>$include command.</dd>
</dl>
</dd>
<dt>returns a tuple containing:</dt>
<dd><ul class="first last simple">
<li>The expanded text as a single string.</li>
<li>The internal globals() dictionary.</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyexpander.lib.find_file">
<code class="descclassname">pyexpander.lib.</code><code class="descname">find_file</code><span class="sig-paren">(</span><em>filename</em>, <em>include_paths</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#find_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.find_file" title="Permalink to this definition">¶</a></dt>
<dd><p>find a file in a list of include paths.</p>
<p>include_paths MUST CONTAIN “” in order to search the
local directory.</p>
</dd></dl>

<dl class="function">
<dt id="pyexpander.lib.keyword_check">
<code class="descclassname">pyexpander.lib.</code><code class="descname">keyword_check</code><span class="sig-paren">(</span><em>identifiers</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#keyword_check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.keyword_check" title="Permalink to this definition">¶</a></dt>
<dd><p>indentifiers must not be identical to keywords.</p>
<p>This function may raise an exception.</p>
</dd></dl>

<dl class="function">
<dt id="pyexpander.lib.parseFile">
<code class="descclassname">pyexpander.lib.</code><code class="descname">parseFile</code><span class="sig-paren">(</span><em>filename</em>, <em>no_stdin_warning</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#parseFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.parseFile" title="Permalink to this definition">¶</a></dt>
<dd><p>parse a file.</p>
</dd></dl>

<dl class="function">
<dt id="pyexpander.lib.parseString">
<code class="descclassname">pyexpander.lib.</code><code class="descname">parseString</code><span class="sig-paren">(</span><em>st</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#parseString"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.parseString" title="Permalink to this definition">¶</a></dt>
<dd><p>parse a string.</p>
</dd></dl>

<dl class="function">
<dt id="pyexpander.lib.processToList">
<code class="descclassname">pyexpander.lib.</code><code class="descname">processToList</code><span class="sig-paren">(</span><em>parse_list</em>, <em>filename=None</em>, <em>external_definitions=None</em>, <em>allow_nobracket_vars=False</em>, <em>auto_continuation=False</em>, <em>auto_indent=False</em>, <em>include_paths=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#processToList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.processToList" title="Permalink to this definition">¶</a></dt>
<dd><p>Expand a parse list to a list of strings.</p>
<dl class="docutils">
<dt>args:</dt>
<dd><p class="first">parse_list: A parse list created by parseString().</p>
<dl class="last docutils">
<dt>filename (str): The filename, if given, is included in possible error</dt>
<dd>messages.</dd>
<dt>external_definitions (dict): A dict with items to import to the</dt>
<dd>globals() dictionary.</dd>
<dt>allow_nobracket_vars (bool): If True, allow variables in the form $VAR</dt>
<dd>instead of $(VAR).</dd>
<dt>auto_continuation (bool): If True, remove newline at the end of lines</dt>
<dd>with a command. This works like having an ‘’ at the end of each
line with a command.</dd>
<dt>auto_indent (bool): If True, indent the contents of macros to the same</dt>
<dd>level as the macro invocation.</dd>
<dt>include_paths (list): A list of paths that are searched for the</dt>
<dd>$include command.</dd>
</dl>
</dd>
<dt>returns a tuple containing:</dt>
<dd><ul class="first last simple">
<li>The expanded text as a list of strings</li>
<li>The internal globals() dictionary.</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyexpander.lib.processToPrint">
<code class="descclassname">pyexpander.lib.</code><code class="descname">processToPrint</code><span class="sig-paren">(</span><em>parse_list</em>, <em>filename=None</em>, <em>external_definitions=None</em>, <em>allow_nobracket_vars=False</em>, <em>auto_continuation=False</em>, <em>auto_indent=False</em>, <em>include_paths=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#processToPrint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.processToPrint" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a parse list, expand the text in it and print it.</p>
<dl class="docutils">
<dt>args:</dt>
<dd><p class="first">parse_list: A parse list created by parseString().</p>
<dl class="last docutils">
<dt>filename (str): The filename, if given, is included in possible error</dt>
<dd>messages.</dd>
<dt>external_definitions (dict): A dict with items to import to the</dt>
<dd>globals() dictionary.</dd>
<dt>allow_nobracket_vars (bool): If True, allow variables in the form $VAR</dt>
<dd>instead of $(VAR).</dd>
<dt>auto_continuation (bool): If True, remove newline at the end of lines</dt>
<dd>with a command. This works like having an ‘’ at the end of each
line with a command.</dd>
<dt>auto_indent (bool): If True, indent the contents of macros to the same</dt>
<dd>level as the macro invocation.</dd>
<dt>include_paths (list): A list of paths that are searched for the</dt>
<dd>$include command.</dd>
</dl>
</dd>
<dt>returns:</dt>
<dd>The internal globals() dictionary.</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pyexpander.parser">
<span id="pyexpander-parser-module"></span><h2>pyexpander.parser module<a class="headerlink" href="#module-pyexpander.parser" title="Permalink to this headline">¶</a></h2>
<p>implement the parser for pyexpander.</p>
<dl class="class">
<dt id="pyexpander.parser.IndexedString">
<em class="property">class </em><code class="descclassname">pyexpander.parser.</code><code class="descname">IndexedString</code><span class="sig-paren">(</span><em>st</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#IndexedString"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.IndexedString" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>a string together with row column information.</p>
<p>Here is an example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">txt</span><span class="o">=</span><span class="s1">&#39;&#39;&#39;01234</span>
<span class="gp">... </span><span class="s1">67</span>
<span class="gp">... </span><span class="s1">9abcd&#39;&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">=</span><span class="n">IndexedString</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(1, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">(1, 2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">(1, 5)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">(1, 6)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="go">(2, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="go">(2, 2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="go">(2, 3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="go">(3, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span>
<span class="go">(3, 5)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span>
<span class="go">(3, 6)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="go">(3, 8)</span>
</pre></div>
</div>
<dl class="method">
<dt id="pyexpander.parser.IndexedString.rowcol">
<code class="descname">rowcol</code><span class="sig-paren">(</span><em>pos</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#IndexedString.rowcol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.IndexedString.rowcol" title="Permalink to this definition">¶</a></dt>
<dd><p>calculate (row,column) from a string position.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.parser.IndexedString.st">
<code class="descname">st</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#IndexedString.st"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.IndexedString.st" title="Permalink to this definition">¶</a></dt>
<dd><p>return the raw string.</p>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="pyexpander.parser.ParseException">
<em class="property">exception </em><code class="descclassname">pyexpander.parser.</code><code class="descname">ParseException</code><span class="sig-paren">(</span><em>value</em>, <em>pos=None</em>, <em>rowcol=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParseException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParseException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">Exception</span></code></p>
<p>used for Exceptions in this module.</p>
</dd></dl>

<dl class="class">
<dt id="pyexpander.parser.ParsedCommand">
<em class="property">class </em><code class="descclassname">pyexpander.parser.</code><code class="descname">ParsedCommand</code><span class="sig-paren">(</span><em>idxst</em>, <em>start</em>, <em>end</em>, <em>ident</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedCommand"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.parser.ParsedItem" title="pyexpander.parser.ParsedItem"><code class="xref py py-class docutils literal"><span class="pre">pyexpander.parser.ParsedItem</span></code></a></p>
<p>class of a pyexpander command with arguments.</p>
<p>A command has the form “$name(argument1, argument2, …)”.</p>
<dl class="method">
<dt id="pyexpander.parser.ParsedCommand.args">
<code class="descname">args</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedCommand.args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedCommand.args" title="Permalink to this definition">¶</a></dt>
<dd><p>return the arguments of the command.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyexpander.parser.ParsedComment">
<em class="property">class </em><code class="descclassname">pyexpander.parser.</code><code class="descname">ParsedComment</code><span class="sig-paren">(</span><em>idxst</em>, <em>start</em>, <em>end</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedComment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedComment" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.parser.ParsedItem" title="pyexpander.parser.ParsedItem"><code class="xref py py-class docutils literal"><span class="pre">pyexpander.parser.ParsedItem</span></code></a></p>
<p>class of a parsed comment.</p>
<p>A comment in pyexpander starts with ‘$#’.</p>
</dd></dl>

<dl class="class">
<dt id="pyexpander.parser.ParsedEval">
<em class="property">class </em><code class="descclassname">pyexpander.parser.</code><code class="descname">ParsedEval</code><span class="sig-paren">(</span><em>idxst</em>, <em>start</em>, <em>end</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedEval"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedEval" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.parser.ParsedItem" title="pyexpander.parser.ParsedItem"><code class="xref py py-class docutils literal"><span class="pre">pyexpander.parser.ParsedItem</span></code></a></p>
<p>class of an pyexpander expression.</p>
<p>A pyexpander expression has the form “$(expression)” e.g. “$(a+1)”. This is
different from ParsedVar where the string within the brackets is a simple
identifier.</p>
</dd></dl>

<dl class="class">
<dt id="pyexpander.parser.ParsedItem">
<em class="property">class </em><code class="descclassname">pyexpander.parser.</code><code class="descname">ParsedItem</code><span class="sig-paren">(</span><em>idxst</em>, <em>start</em>, <em>end</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedItem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedItem" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>base class of parsed items.</p>
<dl class="method">
<dt id="pyexpander.parser.ParsedItem.end">
<code class="descname">end</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedItem.end"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedItem.end" title="Permalink to this definition">¶</a></dt>
<dd><p>return the end of the ParsedItem in the source string.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.parser.ParsedItem.positions">
<code class="descname">positions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedItem.positions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedItem.positions" title="Permalink to this definition">¶</a></dt>
<dd><p>return start and end of ParsedItem in the source string.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.parser.ParsedItem.rowcol">
<code class="descname">rowcol</code><span class="sig-paren">(</span><em>pos=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedItem.rowcol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedItem.rowcol" title="Permalink to this definition">¶</a></dt>
<dd><p>calculate (row,column) from a string position.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.parser.ParsedItem.start">
<code class="descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedItem.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedItem.start" title="Permalink to this definition">¶</a></dt>
<dd><p>return the start of the ParsedItem in the source string.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.parser.ParsedItem.string">
<code class="descname">string</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedItem.string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedItem.string" title="Permalink to this definition">¶</a></dt>
<dd><p>return the string that represents the ParsedItem.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyexpander.parser.ParsedLiteral">
<em class="property">class </em><code class="descclassname">pyexpander.parser.</code><code class="descname">ParsedLiteral</code><span class="sig-paren">(</span><em>idxst</em>, <em>start</em>, <em>end</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedLiteral"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedLiteral" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.parser.ParsedItem" title="pyexpander.parser.ParsedItem"><code class="xref py py-class docutils literal"><span class="pre">pyexpander.parser.ParsedItem</span></code></a></p>
<p>class of a parsed literal.</p>
<p>A literal is a substring in the input that shouldn’t be modified by
pyexpander.</p>
</dd></dl>

<dl class="class">
<dt id="pyexpander.parser.ParsedPureCommand">
<em class="property">class </em><code class="descclassname">pyexpander.parser.</code><code class="descname">ParsedPureCommand</code><span class="sig-paren">(</span><em>idxst</em>, <em>start</em>, <em>end</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedPureCommand"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedPureCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.parser.ParsedItem" title="pyexpander.parser.ParsedItem"><code class="xref py py-class docutils literal"><span class="pre">pyexpander.parser.ParsedItem</span></code></a></p>
<p>class of a pyexpander command without arguments.</p>
<p>A pure command has the form “$name”. Such a command has no arguments which
would be enclosed in round brackets immediately following the name.</p>
</dd></dl>

<dl class="class">
<dt id="pyexpander.parser.ParsedVar">
<em class="property">class </em><code class="descclassname">pyexpander.parser.</code><code class="descname">ParsedVar</code><span class="sig-paren">(</span><em>idxst</em>, <em>start</em>, <em>end</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedVar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedVar" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.parser.ParsedItem" title="pyexpander.parser.ParsedItem"><code class="xref py py-class docutils literal"><span class="pre">pyexpander.parser.ParsedItem</span></code></a></p>
<p>class of a parsed variable.</p>
<p>A variable in pyexpander has the form “$(identifier)”.</p>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.change_linesep">
<code class="descclassname">pyexpander.parser.</code><code class="descname">change_linesep</code><span class="sig-paren">(</span><em>sep</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#change_linesep"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.change_linesep" title="Permalink to this definition">¶</a></dt>
<dd><p>change line separator, this is here just for tests.</p>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.parseAll">
<code class="descclassname">pyexpander.parser.</code><code class="descname">parseAll</code><span class="sig-paren">(</span><em>idxst</em>, <em>pos</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#parseAll"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.parseAll" title="Permalink to this definition">¶</a></dt>
<dd><p>parse everything.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">st</span><span class="p">,</span><span class="n">pos</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">idxst</span><span class="o">=</span> <span class="n">IndexedString</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">pprint</span><span class="p">(</span><span class="n">parseAll</span><span class="p">(</span><span class="n">idxst</span><span class="p">,</span><span class="n">pos</span><span class="p">))</span>
<span class="gp">...</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (0, 2), &#39;abc&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;abc$xyz&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (0, 2), &#39;abc&#39;)</span>
<span class="go">(&#39;ParsedPureCommand&#39;, (4, 6), &#39;xyz&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;abc$</span><span class="si">{xyz}</span><span class="s2">efg&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (0, 2), &#39;abc&#39;)</span>
<span class="go">(&#39;ParsedPureCommand&#39;, (5, 7), &#39;xyz&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (9, 11), &#39;efg&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;abc$xyz(2*4)&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (0, 2), &#39;abc&#39;)</span>
<span class="go">(&#39;ParsedCommand&#39;, (8, 10), &#39;2*4&#39;, &#39;xyz&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;abc$(2*4)ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (0, 2), &#39;abc&#39;)</span>
<span class="go">(&#39;ParsedEval&#39;, (5, 7), &#39;2*4&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (9, 10), &#39;ab&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;abc</span><span class="se">\\</span><span class="s2">$(2*4)ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (0, 2), &#39;abc&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (4, 4), &#39;$&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (5, 11), &#39;(2*4)ab&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;ab$func(1+2)</span><span class="se">\\\n</span><span class="s2">new line&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (0, 1), &#39;ab&#39;)</span>
<span class="go">(&#39;ParsedCommand&#39;, (8, 10), &#39;1+2&#39;, &#39;func&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (14, 21), &#39;new line&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;ab$func(1+2)</span><span class="se">\n</span><span class="s2">new line&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (0, 1), &#39;ab&#39;)</span>
<span class="go">(&#39;ParsedCommand&#39;, (8, 10), &#39;1+2&#39;, &#39;func&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (12, 20), &#39;\nnew line&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;ab$(xyz)(56)&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (0, 1), &#39;ab&#39;)</span>
<span class="go">(&#39;ParsedVar&#39;, (4, 6), &#39;xyz&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (8, 11), &#39;(56)&#39;)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">Some text with a macro: $(xy)</span>
<span class="gp">... </span><span class="s1">an escaped dollar: \$(xy)</span>
<span class="gp">... </span><span class="s1">a macro within letters: abc$</span><span class="si">{xy}</span><span class="s1">def</span>
<span class="gp">... </span><span class="s1">a pyexpander command structure:</span>
<span class="gp">... </span><span class="s1">$if(a=1)</span>
<span class="gp">... </span><span class="s1">here</span>
<span class="gp">... </span><span class="s1">$else</span>
<span class="gp">... </span><span class="s1">there</span>
<span class="gp">... </span><span class="s1">$endif</span>
<span class="gp">... </span><span class="s1">now a continued\</span>
<span class="gp">... </span><span class="s1">line</span>
<span class="gp">... </span><span class="s1">from here:$# the rest is a comment</span>
<span class="gp">... </span><span class="s1">now an escaped continued\\</span>
<span class="gp">... </span><span class="s1">line</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (0, 24), &#39;\nSome text with a macro: &#39;)</span>
<span class="go">(&#39;ParsedVar&#39;, (27, 28), &#39;xy&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (30, 49), &#39;\nan escaped dollar: &#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (51, 51), &#39;$&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (52, 83), &#39;(xy)\na macro within letters: abc&#39;)</span>
<span class="go">(&#39;ParsedPureCommand&#39;, (86, 87), &#39;xy&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (89, 124), &#39;def\na pyexpander command structure:\n&#39;)</span>
<span class="go">(&#39;ParsedCommand&#39;, (129, 131), &#39;a=1&#39;, &#39;if&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (133, 138), &#39;\nhere\n&#39;)</span>
<span class="go">(&#39;ParsedPureCommand&#39;, (140, 143), &#39;else&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (144, 150), &#39;\nthere\n&#39;)</span>
<span class="go">(&#39;ParsedPureCommand&#39;, (152, 156), &#39;endif&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (157, 172), &#39;\nnow a continued&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (175, 189), &#39;line\nfrom here:&#39;)</span>
<span class="go">(&#39;ParsedComment&#39;, (192, 214), &#39; the rest is a comment\n&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (215, 238), &#39;now an escaped continued&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (239, 239), &#39;\\&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (241, 246), &#39;\nline\n&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.parseBackslash">
<code class="descclassname">pyexpander.parser.</code><code class="descname">parseBackslash</code><span class="sig-paren">(</span><em>idxst</em>, <em>pos</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#parseBackslash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.parseBackslash" title="Permalink to this definition">¶</a></dt>
<dd><p>parses a backslash.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">st</span><span class="p">,</span><span class="n">pos</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">sep</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">change_linesep</span><span class="p">(</span><span class="n">sep</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">idxst</span><span class="o">=</span> <span class="n">IndexedString</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">elm</span><span class="p">)</span><span class="o">=</span> <span class="n">parseBackslash</span><span class="p">(</span><span class="n">idxst</span><span class="p">,</span><span class="n">pos</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Parsed: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">elm</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;rest of string:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">repr</span><span class="p">(</span><span class="n">st</span><span class="p">[</span><span class="n">p</span><span class="p">:]))</span>
<span class="gp">... </span>    <span class="n">change_linesep</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\abc&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedLiteral&#39;, (0, 0), &#39;\\&#39;)</span>
<span class="go">rest of string:&#39;abc&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedLiteral&#39;, (0, 0), &#39;\\&#39;)</span>
<span class="go">rest of string:&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\r</span><span class="s2">ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Parsed: None</span>
<span class="go">rest of string:&#39;ab&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\r</span><span class="s2">ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedLiteral&#39;, (0, 0), &#39;\\&#39;)</span>
<span class="go">rest of string:&#39;\rab&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\r</span><span class="s2">ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedLiteral&#39;, (0, 0), &#39;\\&#39;)</span>
<span class="go">rest of string:&#39;\rab&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\n</span><span class="s2">ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedLiteral&#39;, (0, 0), &#39;\\&#39;)</span>
<span class="go">rest of string:&#39;\nab&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\n</span><span class="s2">ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Parsed: None</span>
<span class="go">rest of string:&#39;ab&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\n</span><span class="s2">ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedLiteral&#39;, (0, 0), &#39;\\&#39;)</span>
<span class="go">rest of string:&#39;\nab&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\r\n</span><span class="s2">ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Parsed: None</span>
<span class="go">rest of string:&#39;\nab&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\r\n</span><span class="s2">ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedLiteral&#39;, (0, 0), &#39;\\&#39;)</span>
<span class="go">rest of string:&#39;\r\nab&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\r\n</span><span class="s2">ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Parsed: None</span>
<span class="go">rest of string:&#39;ab&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.parseBracketed">
<code class="descclassname">pyexpander.parser.</code><code class="descname">parseBracketed</code><span class="sig-paren">(</span><em>idxst</em>, <em>pos</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#parseBracketed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.parseBracketed" title="Permalink to this definition">¶</a></dt>
<dd><p>parse an identifier in curly brackets.</p>
<p>Here are some examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">st</span><span class="p">,</span><span class="n">pos</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">idxst</span><span class="o">=</span> <span class="n">IndexedString</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span><span class="o">=</span> <span class="n">parseBracketed</span><span class="p">(</span><span class="n">idxst</span><span class="p">,</span><span class="n">pos</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">st</span><span class="p">[</span><span class="n">a</span><span class="p">:</span><span class="n">b</span><span class="p">])</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="si">{abc}</span><span class="s1">&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">{abc}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="si">{ab8c}</span><span class="s1">&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">{ab8c}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="si">{c}</span><span class="s1">&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">{c}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ParseException</span>: <span class="n">command enclosed in curly brackets at line 1, col 1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;{abc&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ParseException</span>: <span class="n">command enclosed in curly brackets at line 1, col 1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;x</span><span class="si">{ab8c}</span><span class="s1">&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">{ab8c}</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.parseCode">
<code class="descclassname">pyexpander.parser.</code><code class="descname">parseCode</code><span class="sig-paren">(</span><em>idxst</em>, <em>pos</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#parseCode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.parseCode" title="Permalink to this definition">¶</a></dt>
<dd><p>parse python code, it MUST start with a ‘(‘.</p>
<p>Here are some examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">st</span><span class="p">,</span><span class="n">pos</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">idxst</span><span class="o">=</span> <span class="n">IndexedString</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span><span class="o">=</span> <span class="n">parseCode</span><span class="p">(</span><span class="n">idxst</span><span class="p">,</span><span class="n">pos</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">st</span><span class="p">[</span><span class="n">a</span><span class="p">:</span><span class="n">b</span><span class="p">])</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(a+b)&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(a+b)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(a+(b*c))&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(a+(b*c))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(a+(b*c)+&quot;)&quot;)&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(a+(b*c)+&quot;)&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(a+(b*c)+&#39;&#39;&#39;)&#39;&#39;&#39;)&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(a+(b*c)+&#39;&#39;&#39;)&#39;&#39;&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(a+(b*c)+&#39;&#39;&#39;)&#39;&#39;&#39;+# comment )\n)&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ParseException</span>: <span class="n">end of bracket expression not found at line 1, col 1</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;(a+(b*c)+&#39;&#39;&#39;)&#39;&#39;&#39;+# comment )</span><span class="se">\n</span><span class="s2">)&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(a+(b*c)+&#39;&#39;&#39;)&#39;&#39;&#39;+# comment )</span>
<span class="go">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.parseComment">
<code class="descclassname">pyexpander.parser.</code><code class="descname">parseComment</code><span class="sig-paren">(</span><em>idxst</em>, <em>pos</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#parseComment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.parseComment" title="Permalink to this definition">¶</a></dt>
<dd><p>parse a python comment.</p>
<p>Here are some examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">st</span><span class="p">,</span><span class="n">pos</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">sep</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">change_linesep</span><span class="p">(</span><span class="n">sep</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">idxst</span><span class="o">=</span> <span class="n">IndexedString</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span><span class="o">=</span> <span class="n">parseComment</span><span class="p">(</span><span class="n">idxst</span><span class="p">,</span><span class="n">pos</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">st</span><span class="p">[</span><span class="n">a</span><span class="p">:</span><span class="n">b</span><span class="p">]))</span>
<span class="gp">... </span>    <span class="n">change_linesep</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;#abc&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;#abc&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;#abc</span><span class="se">\n</span><span class="s2">ef&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">&#39;#abc\n&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;#abc</span><span class="se">\r\n</span><span class="s2">ef&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">&#39;#abc\r\n&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;xy#abc&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;#abc&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;xy#abc</span><span class="se">\n</span><span class="s2">ef&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">&#39;#abc\n&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;xy#abc</span><span class="se">\n</span><span class="s2">ef&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ParseException</span>: <span class="n">start of comment not found at line 1, col 4</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.parseDollar">
<code class="descclassname">pyexpander.parser.</code><code class="descname">parseDollar</code><span class="sig-paren">(</span><em>idxst</em>, <em>pos</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#parseDollar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.parseDollar" title="Permalink to this definition">¶</a></dt>
<dd><p>parse things that follow a dollar.</p>
<p>Here are some examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">st</span><span class="p">,</span><span class="n">pos</span><span class="p">):</span>
<span class="gp">... </span>  <span class="n">idxst</span><span class="o">=</span> <span class="n">IndexedString</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
<span class="gp">... </span>  <span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">elm</span><span class="p">)</span><span class="o">=</span> <span class="n">parseDollar</span><span class="p">(</span><span class="n">idxst</span><span class="p">,</span><span class="n">pos</span><span class="p">)</span>
<span class="gp">... </span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Parsed: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">elm</span><span class="p">)</span>
<span class="gp">... </span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;rest of string:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">st</span><span class="p">[</span><span class="n">p</span><span class="p">:])</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;$abc&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedPureCommand&#39;, (1, 3), &#39;abc&#39;)</span>
<span class="go">rest of string:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;$abc%&amp;/&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedPureCommand&#39;, (1, 3), &#39;abc&#39;)</span>
<span class="go">rest of string:%&amp;/</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;$abc(2*3)&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedCommand&#39;, (5, 7), &#39;2*3&#39;, &#39;abc&#39;)</span>
<span class="go">rest of string:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot; $abc(2*sin(x))&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedCommand&#39;, (6, 13), &#39;2*sin(x)&#39;, &#39;abc&#39;)</span>
<span class="go">rest of string:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot; $abc(2*sin(x))bn&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedCommand&#39;, (6, 13), &#39;2*sin(x)&#39;, &#39;abc&#39;)</span>
<span class="go">rest of string:bn</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot; $# a comment</span><span class="se">\n</span><span class="s2">new line&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedComment&#39;, (3, 13), &#39; a comment\n&#39;)</span>
<span class="go">rest of string:new line</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;$(abc)&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedVar&#39;, (2, 4), &#39;abc&#39;)</span>
<span class="go">rest of string:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;$(abc*2)&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedEval&#39;, (2, 6), &#39;abc*2&#39;)</span>
<span class="go">rest of string:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot; $(2*x(y))abc&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedEval&#39;, (3, 8), &#39;2*x(y)&#39;)</span>
<span class="go">rest of string:abc</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.parseStringLiteral">
<code class="descclassname">pyexpander.parser.</code><code class="descname">parseStringLiteral</code><span class="sig-paren">(</span><em>idxst</em>, <em>pos</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#parseStringLiteral"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.parseStringLiteral" title="Permalink to this definition">¶</a></dt>
<dd><p>parse a python string literal.</p>
<p>returns 2 numbers, the index where the string starts and
the index of the first character <em>after</em> the string</p>
<p>Here are some examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">st</span><span class="p">,</span><span class="n">pos</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">idxst</span><span class="o">=</span> <span class="n">IndexedString</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span><span class="o">=</span> <span class="n">parseStringLiteral</span><span class="p">(</span><span class="n">idxst</span><span class="p">,</span><span class="n">pos</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">st</span><span class="p">[</span><span class="n">a</span><span class="p">:</span><span class="n">b</span><span class="p">])</span>
<span class="gp">...</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;&quot;abc&quot;&#39;&#39;&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&quot;abc&quot;</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;&#39;&#39;&#39;ab&#39;c&#39;d&#39;&#39;&#39;&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;&#39;&#39;ab&#39;c&#39;d&#39;&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;&#39;&#39;&#39;ab&#39;cd&#39;&#39;&#39;&#39;&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;&#39;&#39;ab&#39;cd&#39;&#39;&#39;</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;U&quot;abc&quot;&#39;&#39;&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">U&quot;abc&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;xU&quot;abc&quot;&#39;&#39;&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">U&quot;abc&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;xUr&quot;abc&quot;&#39;&#39;&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">Ur&quot;abc&quot;</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;xUr&quot;ab\\&quot;c&quot;&#39;&#39;&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">Ur&quot;ab\\&quot;</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;xUr&quot;ab\&quot;c&quot;&#39;&#39;&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">Ur&quot;ab\&quot;c&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;xUr&quot;ab\&quot;c&quot;&#39;&#39;&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ParseException</span>: <span class="n">start of string expected at line 1, col 1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;&quot;ab&#39;&#39;&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ParseException</span>: <span class="n">end of string not found at line 1, col 1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&#39;&#39;&#39;ab&#39;&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ParseException</span>: <span class="n">end of string not found at line 1, col 1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;&quot;ab\&quot;&#39;&#39;&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ParseException</span>: <span class="n">end of string not found at line 1, col 1</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.pprint">
<code class="descclassname">pyexpander.parser.</code><code class="descname">pprint</code><span class="sig-paren">(</span><em>parselist</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#pprint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.pprint" title="Permalink to this definition">¶</a></dt>
<dd><p>pretty print a parselist.</p>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.scanPyIdentList">
<code class="descclassname">pyexpander.parser.</code><code class="descname">scanPyIdentList</code><span class="sig-paren">(</span><em>st</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#scanPyIdentList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.scanPyIdentList" title="Permalink to this definition">¶</a></dt>
<dd><p>scan a list of python identifiers.</p>
<p>Here are some examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">scanPyIdentList</span><span class="p">(</span><span class="s2">&quot;a,b&quot;</span><span class="p">)</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scanPyIdentList</span><span class="p">(</span><span class="s2">&quot;a,b.d, c&quot;</span><span class="p">)</span>
<span class="go">[&#39;a&#39;, &#39;b.d&#39;, &#39;c&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scanPyIdentList</span><span class="p">(</span><span class="s2">&quot;a,b.d, c&amp;&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ParseException</span>: <span class="n">list of python identifiers expected</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.scanPyIn">
<code class="descclassname">pyexpander.parser.</code><code class="descname">scanPyIn</code><span class="sig-paren">(</span><em>st</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#scanPyIn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.scanPyIn" title="Permalink to this definition">¶</a></dt>
<dd><p>scan a python “in” statement.</p>
<p>Here are some examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">scanPyIn</span><span class="p">(</span><span class="s2">&quot; (a,b) in k.items() &quot;</span><span class="p">)</span>
<span class="go">(&#39;(a,b)&#39;, &#39;in&#39;, &#39;k.items()&#39;)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-pyexpander">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pyexpander" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction to pyexpander</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference-expander.html">pyexpander reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="epics-support.html">EPICS support in pyexpander</a></li>
<li class="toctree-l1"><a class="reference internal" href="python2.html">pyexpander for users not familiar with python version 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="python3.html">pyexpander for users not familiar with python version 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="expander-options.html">expander.py and expander3.py command line options</a></li>
<li class="toctree-l1"><a class="reference internal" href="msi2pyexpander-options.html">msi2pyexpander.py and msi2pyexpander3.py command line options</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyexpander-install.html">Installing pyexpander</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyexpander-install-by-setup.html">Installing pyexpander by running setup.py</a></li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/pyexpander.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyexpander 1.8.4 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Helmholtz-Zentrum Berlin GmbH.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.6.
    </div>
  </body>
</html>